<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title></title>
  <link rel="stylesheet" href="main.css">

  <script src="rangy-1.3.0/rangy-core.js"></script>
  <script src="jquery.min.js"></script>
</head>
<body>

  <h1>hello, world</h1>
  <p>几天后，撒旦怒冲冲地上到天堂之门，要求圣彼得给出一个解释。</p>
  <p>“你的所作所为纯粹是恐怖主义！”他说，“你将那个人送下地狱，而他完全破坏了我的威望！从一住进来，他就开始倾听人们的言语，直视他们，并跟他们交谈。现在，每个人都在分享他们的感受，互相拥抱和亲吻。在地狱里我不想有这种事情发生！请你让他进入天堂！”</p>

  <img src="http://i1.hdslb.com/u_user/4e575551c5687b06ac49103e0470025d.jpg"/>

  <img src="http://img0.imgtn.bdimg.com/it/u=411239924,860115466&fm=21&gp=0.jpg"/>

  <div class="faster-icon"></div>

  <ul class="faster-container">
  </ul>

  <script src="faster.js"></script>
  <script src="listener.js"></script>

  <script>
    var fetchData = function () {
      $('ul.faster-container').html('<li class="faster-header"><div style="text-align: right">Faster&nbsp;<i class="faster-logo"></i></div><button></button></li>');

      var data = JSON.parse('{"channels": [{"token": "0000000000000000000000000000000000000000", "messages": [{"read": false, "content": "{\"title\":null,\"text\":null,\"image\":\"http://i1.hdslb.com/u_user/4e575551c5687b06ac49103e0470025d.jpg\",\"date\":\"2015-06-07T03:10:05.149Z\"}", "id": 1, "posted": "2015-06-07T03:10:08.867Z"}, {"read": false, "content": "{\"title\":\"hello, world\",\"text\":null,\"image\":null,\"date\":\"2015-06-07T03:16:19.378Z\"}", "id": 2, "posted": "2015-06-07T03:16:20.504Z"}, {"read": false, "content": "{\"title\":null,\"text\":\"\u201c\u4f60\u7684\u6240\u4f5c\u6240\u4e3a\u7eaf\u7cb9\u662f\u6050\u6016\u4e3b\u4e49\uff01\u201d\u4ed6\u8bf4\uff0c\u201c\u4f60\u5c06\u90a3\u4e2a\u4eba\u9001\u4e0b\u5730\u72f1\uff0c\u800c\u4ed6\u5b8c\u5168\u7834\u574f\u4e86\u6211\u7684\u5a01\u671b\uff01\u4ece\u4e00\u4f4f\u8fdb\u6765\uff0c\u4ed6\u5c31\u5f00\u59cb\u503e\u542c\u4eba\u4eec\u7684\u8a00\u8bed\uff0c\u76f4\u89c6\u4ed6\u4eec\uff0c\u5e76\u8ddf\u4ed6\u4eec\u4ea4\u8c08\u3002\u73b0\u5728\uff0c\u6bcf\u4e2a\u4eba\u90fd\u5728\u5206\u4eab\u4ed6\u4eec\u7684\u611f\u53d7\uff0c\u4e92\u76f8\u62e5\u62b1\u548c\u4eb2\u543b\u3002\u5728\u5730\u72f1\u91cc\u6211\u4e0d\u60f3\u6709\u8fd9\u79cd\u4e8b\u60c5\u53d1\u751f\uff01\u8bf7\u4f60\u8ba9\u4ed6\u8fdb\u5165\u5929\u5802\uff01\u201d\\n\",\"image\":null,\"date\":\"2015-06-07T03:20:57.342Z\"}", "id": 3, "posted": "2015-06-07T03:21:02.247Z"}, {"read": false, "content": "{\"title\":null,\"text\":null,\"image\":\"http://i2.hdslb.com/320_180/video/38/3850cc71a4788cc9ce01c0d62c36c835.jpg\",\"date\":\"2015-06-07T03:21:22.007Z\"}", "id": 4, "posted": "2015-06-07T03:21:37.350Z"}, {"read": false, "content": "{\"title\":null,\"text\":\"\u4f60\u5c06\u90a3\u4e2a\u4eba\u9001\u4e0b\u5730\u72f1\uff0c\u800c\u4ed6\u5b8c\u5168\u7834\u574f\u4e86\u6211\u7684\u5a01\u671b\uff01\\n\",\"image\":null,\"date\":\"2015-06-07T07:06:15.981Z\"}", "id": 5, "posted": "2015-06-07T07:06:18.834Z"}, {"read": false, "content": "{\"title\":null,\"text\":\"\u51e0\u5929\u540e\uff0c\u6492\u65e6\u6012\u51b2\u51b2\u5730\u4e0a\u5230\u5929\u5802\u4e4b\u95e8\uff0c\u8981\u6c42\u5723\u5f7c\u5f97\u7ed9\u51fa\u4e00\u4e2a\u89e3\u91ca\u3002\\n\",\"image\":null,\"date\":\"2015-06-07T07:07:04.299Z\"}", "id": 6, "posted": "2015-06-07T07:07:05.044Z"}, {"read": false, "content": "{\"title\":null,\"text\":null,\"image\":\"http://img0.imgtn.bdimg.com/it/u=411239924,860115466&fm=21&gp=0.jpg\",\"date\":\"2015-06-07T08:23:50.181Z\"}", "id": 7, "posted": "2015-06-07T08:23:51.897Z"}, {"read": false, "content": "{\"title\":null,\"text\":null,\"image\":\"http://img0.imgtn.bdimg.com/it/u=411239924,860115466&fm=21&gp=0.jpg\",\"date\":\"2015-06-07T09:11:00.107Z\"}", "id": 8, "posted": "2015-06-07T09:11:01.168Z"}, {"read": false, "content": "{\"title\":null,\"text\":null,\"image\":\"http://i1.hdslb.com/u_user/4e575551c5687b06ac49103e0470025d.jpg\",\"date\":\"2015-06-07T09:15:18.108Z\"}", "id": 9, "posted": "2015-06-07T09:15:24.867Z"}, {"read": false, "content": "{\"title\":null,\"text\":null,\"image\":\"http://img0.imgtn.bdimg.com/it/u=411239924,860115466&fm=21&gp=0.jpg\",\"date\":\"2015-06-07T09:15:30.744Z\"}", "id": 10, "posted": "2015-06-07T09:15:31.846Z"}, {"read": false, "content": "{\"title\":null,\"text\":null,\"image\":\"http://img0.imgtn.bdimg.com/it/u=411239924,860115466&fm=21&gp=0.jpg\",\"date\":\"2015-06-07T09:15:35.069Z\"}", "id": 11, "posted": "2015-06-07T09:15:34.997Z"}, {"read": false, "content": "{\"title\":null,\"text\":null,\"image\":\"http://i1.hdslb.com/u_user/4e575551c5687b06ac49103e0470025d.jpg\",\"date\":\"2015-06-07T09:15:37.791Z\"}", "id": 12, "posted": "2015-06-07T09:15:38.220Z"}, {"read": false, "content": "{\"title\":null,\"text\":null,\"image\":\"http://img0.imgtn.bdimg.com/it/u=411239924,860115466&fm=21&gp=0.jpg\",\"date\":\"2015-06-07T09:15:40.556Z\"}", "id": 13, "posted": "2015-06-07T09:15:40.810Z"}]}], "error": 0}');
        if (!data.error) {
          data.channels.length && data.channels[0].messages.forEach(function (msg) {
            var obj = JSON.parse(msg.content);
            var html = '<li class="faster-element">';
            if (obj.title)
              html += '<p class="faster-title">' + obj.title + '</p>';
            if (obj.image)
              html += '<img class="faster-image" src="' + obj.image + '">';
            if (obj.text)
              html += '<p class="faster-text">' + obj.text + '</p>';
            if (obj.date)
              html += '<p class="faster-date">' + obj.date + '</p>';
            html += '</li>';
            $('ul.faster-container').append(html);
          });
        }
    };

    var faster = new Faster(
        fetchData
    );

    fetchData();

  </script>
</body>
</html>
